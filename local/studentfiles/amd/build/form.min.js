define ("local_studentfiles/form",["exports","core/str","core/notification"],function(a,b,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.registerEventListener=d;c=function(a){return a&&a.__esModule?a:{default:a}}(c);var e={mailtemplate:"#id_mailtemplate",mailsubject:"#id_mailsubject",mailbody:"#id_mailbody"};function d(){var a=document.querySelector(e.mailtemplate),d=document.querySelector(e.mailsubject),f=document.querySelector(e.mailbody),g=f.closest("form"),h=JSON.parse(a.dataset.json),i=h.templates,j=h.notemplateid,k={},l=[],m=document.createEvent("HTMLEvents");m.initEvent("change",!0,!0);i.forEach(function(a){k[parseInt(a.id)]=a;if(a.string){l.push(a.subject);l.push(a.message)}});(0,b.get_strings)(l.map(function(a){return{key:a,component:"local_studentfiles"}})).then(function(b){for(var c in k){var e=k[c];if(e.string){e.subject=b[l.indexOf(e.subject)];e.message=b[l.indexOf(e.message)]}}if(parseInt(a.value)===j){k[j].subject=d.value;k[j].message=f.value}g.addEventListener("change",function(b){var c=parseInt(a.value);if(a.contains(b.target)){d.value=k[c].subject;f.value=k[c].message;d.dispatchEvent(m);f.dispatchEvent(m);return!0}if(c!==j){return!1}if(d.contains(b.target)){k[j].subject=d.value}if(f.contains(b.target)){k[j].message=f.value}return!0});return!0}).catch(c.default.exception)}});
//# sourceMappingURL=form.min.js.map
