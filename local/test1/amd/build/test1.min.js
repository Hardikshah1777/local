define("local_test1/test1",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;function showToast(message){let isSuccess=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],title=isSuccess?"Mail Send":"Mail Not Send";const icon=isSuccess?"success":"error";let toast=!1;message.includes("CSV")&&(title=null,toast=!0),Swal.fire({title:title,text:message,icon:icon,showConfirmButton:!1,confirmButtonText:"OK",showCancelButton:!1,cancelButtonText:"Cancle",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",iconColor:"#d33",timer:3e3,toast:toast,timerProgressBar:!0,allowEscapeKey:!1})}_exports.init=()=>{window.console.log("--------------- Test 1 js working ---------------")},document.querySelectorAll(".maillink").forEach((link=>{link.addEventListener("click",(function(event){event.preventDefault();const userid=this.getAttribute("data-uid");fetch(M.cfg.wwwroot+"/local/test1/testmail.php",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({uid:userid})}).then((response=>response.json())).then((data=>{data.success?(showToast("Email sent successfully to "+data.username,!0),window.console.log("Email sent successfully to "+data.username)):showToast("Failed to send mail",!1)})).catch((error=>{window.console.log(error),showToast("An error occurred while sending the email.",!1)}))}))})),document.querySelectorAll(".downloadpdf").forEach((link=>{link.addEventListener("click",(function(event){event.preventDefault();const user=JSON.parse(this.getAttribute("data-user")),tr=this.closest("tr");if(!tr)return void window.console.error("Row not found");const rowData=Array.from(tr.children).map((td=>td.textContent.trim())).slice(1),{jsPDF:jsPDF}=window.jspdf,doc=new jsPDF;doc.setFontSize(16),doc.text("User Information.",80,15),doc.autoTable({head:[["Name","Email","City","Date"]],body:[rowData],startY:20});const filename=user.firstname+" "+user.lastname+".pdf",blob=doc.output("blob"),formData=new FormData;formData.append("pdf",blob,filename),formData.append("userid",user.id),fetch(M.cfg.wwwroot+"/local/test1/testmail.php",{method:"POST",body:formData}).then((response=>response.json())).then((result=>{window.console.log("PDF sent to user : ",result.username),showToast("PDF sent to user : "+result.username,!0)})).catch((error=>{window.console.error("Error sending PDF to server:",error),showToast("Error sending PDF in send mail",!1)})),doc.save(filename)}))})),document.querySelectorAll(".downloadcsv").forEach((link=>{link.addEventListener("click",(function(event){event.preventDefault();const user=JSON.parse(this.getAttribute("data-user")),tr=this.closest("tr");if(!tr)return void window.error("Row not found");const rowData=Array.from(tr.children).map((td=>td.textContent.trim())).slice(1),csvContent=[["Name","Email","City","Date"].join(","),rowData.join(",")].join("\n"),blob=new Blob([csvContent],{type:"text/csv;charset=utf-8;"}),url=URL.createObjectURL(blob),a=document.createElement("a");let filename=user.firstname+" "+user.lastname+".csv";a.setAttribute("href",url),a.setAttribute("download",filename),a.style.display="none",document.body.appendChild(a),a.click(),showToast("CSV Exported successfully...",!0),document.body.removeChild(a),URL.revokeObjectURL(url)}))}))}));

//# sourceMappingURL=test1.min.js.map