define("local_test1/test1",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;function showToast(message){let isSuccess=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const toast=document.getElementById("toast");toast.textContent=message,toast.style.backgroundColor=isSuccess?"#b3ffae":"#ffe0e0",toast.className="show d-flex justify-content-center p-2",setTimeout((()=>{toast.className="toast "}),2e3)}_exports.init=()=>{window.console.log("Test 1 js")},document.querySelectorAll(".maillink").forEach((link=>{link.addEventListener("click",(function(event){event.preventDefault();const userid=this.getAttribute("data-uid");fetch(M.cfg.wwwroot+"/local/test1/testmail.php",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({userid:userid})}).then((response=>response.json())).then((data=>{data.success?(showToast("Email sent successfully to "+data.username,!0),window.console.log("Email sent successfully to "+data.username)):showToast("Failed to send mail",!1)})).catch((error=>{window.console.log(error),showToast("An error occurred while sending the email.",!1)}))}))})),document.querySelectorAll(".downloadpdf").forEach((link=>{link.addEventListener("click",(function(event){event.preventDefault();const user=JSON.parse(this.getAttribute("data-user")),tr=this.closest("tr");if(!tr)return void window.console.error("Row not found");const rowData=Array.from(tr.children).map((td=>td.textContent.trim())).slice(1),{jsPDF:jsPDF}=window.jspdf,doc=new jsPDF;doc.setFontSize(16),doc.text("User Information.",70,15),doc.autoTable({head:[["Name","Email","City","Date"]],body:[rowData],startY:20});const filename=user.firstname+" "+user.lastname+".pdf",blob=doc.output("blob"),formData=new FormData;formData.append("pdf",blob,filename),formData.append("userid",user.id),fetch(M.cfg.wwwroot+"/local/test1/testmail.php",{method:"POST",body:formData}).then((response=>response.json())).then((result=>{window.console.log("PDF sent to server for email to user : ",result.username)})).catch((error=>{window.console.error("Error sending PDF to server:",error)})),doc.save(filename)}))})),document.querySelectorAll(".downloadcsv").forEach((link=>{link.addEventListener("click",(function(event){event.preventDefault();const user=JSON.parse(this.getAttribute("data-user")),tr=this.closest("tr");if(!tr)return void window.error("Row not found");const rowData=Array.from(tr.children).map((td=>td.textContent.trim())),csvContent=[["","Name","Email","City","Date"].join(","),rowData.join(",")].join("\\n"),blob=new Blob([csvContent],{type:"text/csv;charset=utf-8;"}),url=URL.createObjectURL(blob),a=document.createElement("a");let filename=user.firstname+" "+user.lastname+".csv";a.setAttribute("href",url),a.setAttribute("download",filename),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(url)}))}))}));

//# sourceMappingURL=test1.min.js.map