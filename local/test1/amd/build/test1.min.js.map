{"version":3,"file":"test1.min.js","sources":["../src/test1.js"],"sourcesContent":["/* working */\n\nexport const init = () => {\n    //alert('Test 1 js');\n    window.console.log('Test 1 js');\n};\n/**\n * Description of showToast.\n * @param {string} message - The message.\n * @param {boolean} isSuccess - Indicates success or failure.\n */\nfunction showToast(message, isSuccess = true) {\n    // const toast = document.getElementById('toast');\n    // toast.textContent = message;\n    // toast.style.backgroundColor = isSuccess ? '#b3ffae' : '#ffe0e0';\n    // toast.className = 'show d-flex justify-content-center p-2';\n    // setTimeout(() => {\n    //     toast.className = 'toast ';\n    // }, 2000);\n\n    const title = isSuccess ? 'Send' : 'Not Send';\n    const icon = isSuccess ? 'success' : 'error';\n    Swal.fire({\n        title: 'Mail ' + title,\n        text: message,\n        icon: icon,\n        confirmButtonText: 'OK',\n        //showCancelButton: false,\n        showConfirmButton: false,\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor:'#d33',\n        iconColor:'#d33',\n        timer: 3000,\n        // toast: true,\n        timerProgressBar:true,\n        allowOutsideClick:true,\n        allowEscapeKey:false,\n        allowEnterKey:true,\n    });\n}\n\ndocument.querySelectorAll('.maillink').forEach(link => {\n    link.addEventListener('click', function(event) {\n        event.preventDefault();\n        const userid = this.getAttribute('data-uid');\n        fetch(M.cfg.wwwroot +'/local/test1/testmail.php', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-Requested-With': 'XMLHttpRequest',\n            },\n            body: JSON.stringify({ userid: userid })\n        }).then(response => response.json())\n            .then(data => {\n                if (data.success) {\n                    showToast('Email sent successfully to ' + data.username, true);\n                    window.console.log('Email sent successfully to ' + data.username);\n                } else {\n                    showToast('Failed to send mail', false);\n                }\n            }).catch(error => {\n            window.console.log(error);\n            showToast('An error occurred while sending the email.', false);\n        });\n    });\n});\n\ndocument.querySelectorAll('.downloadpdf').forEach(link => {\n    link.addEventListener('click', function(event) {\n        event.preventDefault();\n        const user = JSON.parse(this.getAttribute('data-user'));\n        const tr = this.closest('tr');\n        if (!tr) {\n            window.error(\"Row not found\");\n            return;\n        }\n\n        const headers = ['', \"Name\", \"Email\", \"City\", \"Date\"];\n        const rowData = Array.from(tr.children).map(td => td.textContent.trim());\n\n        const tempTable = document.createElement('table');\n        tempTable.appendChild(tr.cloneNode(true));\n        const { jsPDF } = window.jspdf;\n        const doc = new jsPDF();\n\n        const title = \"User Information.\";\n        doc.setFontSize(16);\n        doc.text(title, 70, 15);\n\n        doc.autoTable({ head: [headers],\n            body: [rowData],\n            startY: 20,\n        });\n        let filename = user.firstname + ' ' + user.lastname + '.pdf';\n        doc.save(filename);\n    });\n});\n\ndocument.querySelectorAll('.downloadcsv').forEach(link => {\n    link.addEventListener('click', function(event) {\n        event.preventDefault();\n        const user = JSON.parse(this.getAttribute('data-user'));\n        const tr = this.closest('tr');\n        if (!tr) {\n            window.error(\"Row not found\");\n            return;\n        }\n\n        const headers = [\"\", \"Name\", \"Email\", \"City\", \"Date\"];\n        const rowData = Array.from(tr.children).map(td => td.textContent.trim());\n\n        const csvContent = [ headers.join(','), rowData.join(',') ].join(\"\\\\n\");\n\n        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        let filename = user.firstname + ' ' + user.lastname + '.csv';\n        a.setAttribute('href', url);\n        a.setAttribute('download', filename);\n        a.style.display = 'none';\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        URL.revokeObjectURL(url);\n    });\n});"],"names":["showToast","message","isSuccess","arguments","length","undefined","title","icon","Swal","fire","text","confirmButtonText","showConfirmButton","confirmButtonColor","cancelButtonColor","iconColor","timer","timerProgressBar","allowOutsideClick","allowEscapeKey","allowEnterKey","_exports","init","window","console","log","document","querySelectorAll","forEach","link","addEventListener","event","preventDefault","userid","this","getAttribute","fetch","M","cfg","wwwroot","method","headers","body","JSON","stringify","then","response","json","data","success","username","catch","error","user","parse","tr","closest","rowData","Array","from","children","map","td","textContent","trim","createElement","appendChild","cloneNode","jsPDF","jspdf","doc","setFontSize","autoTable","head","startY","filename","firstname","lastname","save","csvContent","join","blob","Blob","type","url","URL","createObjectURL","a","setAttribute","style","display","click","removeChild","revokeObjectURL"],"mappings":"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"}