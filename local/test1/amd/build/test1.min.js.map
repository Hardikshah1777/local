{"version":3,"file":"test1.min.js","sources":["../src/test1.js"],"sourcesContent":["/* working */\n\nexport const init = () => {\n    //alert('Test 1 js');\n    window.console.log('Test 1 js');\n};\n/**\n * Description of showToast.\n * @param {string} message - The message.\n * @param {boolean} isSuccess - Indicates success or failure.\n */\nfunction showToast(message, isSuccess = true) {\n    const toast = document.getElementById('toast');\n    toast.textContent = message;\n    toast.style.backgroundColor = isSuccess ? '#b3ffae' : '#ffe0e0';\n    toast.className = 'show d-flex justify-content-center p-2';\n    setTimeout(() => {\n        toast.className = 'toast ';\n    }, 2000);\n\n    // const title = isSuccess ? 'Send' : 'Not Send';\n    // const icon = isSuccess ? 'success' : 'error';\n    // Swal.fire({\n    //     title: 'Mail ' + title,\n    //     text: message,\n    //     icon: icon,\n    //     confirmButtonText: 'OK',\n    //     //showCancelButton: false,\n    //     showConfirmButton: false,\n    //     confirmButtonColor: '#3085d6',\n    //     cancelButtonColor:'#d33',\n    //     iconColor:'#d33',\n    //     timer: 3000,\n    //     // toast: true,\n    //     timerProgressBar:true,\n    //     allowOutsideClick:true,\n    //     allowEscapeKey:false,\n    //     allowEnterKey:true,\n    // });\n}\n\ndocument.querySelectorAll('.maillink').forEach(link => {\n    link.addEventListener('click', function(event) {\n        event.preventDefault();\n        const userid = this.getAttribute('data-uid');\n        fetch(M.cfg.wwwroot +'/local/test1/testmail.php', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-Requested-With': 'XMLHttpRequest',\n            },\n            body: JSON.stringify({ userid: userid })\n        }).then(response => response.json())\n            .then(data => {\n                if (data.success) {\n                    showToast('Email sent successfully to ' + data.username, true);\n                    window.console.log('Email sent successfully to ' + data.username);\n                } else {\n                    showToast('Failed to send mail', false);\n                }\n            }).catch(error => {\n            window.console.log(error);\n            showToast('An error occurred while sending the email.', false);\n        });\n    });\n});\n\ndocument.querySelectorAll('.downloadpdf').forEach(link => {\n    link.addEventListener('click', function(event) {\n        event.preventDefault();\n        const user = JSON.parse(this.getAttribute('data-user'));\n        const tr = this.closest('tr');\n        if (!tr) {\n            window.console.error(\"Row not found\");\n            return;\n        }\n\n        const headers = [\"Name\", \"Email\", \"City\", \"Date\"];\n        const rowData = Array.from(tr.children).map(td => td.textContent.trim()).slice(1);\n\n        const { jsPDF } = window.jspdf;\n        const doc = new jsPDF();\n\n        const title = \"User Information.\";\n        doc.setFontSize(16);\n        doc.text(title, 70, 15);\n\n        doc.autoTable({ head: [headers], body: [rowData], startY: 20 });\n\n        const filename = user.firstname + ' ' + user.lastname + '.pdf';\n\n        const blob = doc.output('blob'); // sync\n        const formData = new FormData();\n        formData.append('pdf', blob, filename);\n        formData.append('userid', user.id);\n\n        fetch(M.cfg.wwwroot +'/local/test1/testmail.php', {\n            method: 'POST',\n            body: formData\n        }).then(response => response.json())\n            .then(result => {\n                window.console.log('PDF sent to server for email to user : ', result.username);\n            }).catch(error => {\n                window.console.error('Error sending PDF to server:', error);\n        });\n\n        doc.save(filename);\n    });\n});\n\ndocument.querySelectorAll('.downloadcsv').forEach(link => {\n    link.addEventListener('click', function(event) {\n        event.preventDefault();\n        const user = JSON.parse(this.getAttribute('data-user'));\n        const tr = this.closest('tr');\n        if (!tr) {\n            window.error(\"Row not found\");\n            return;\n        }\n\n        const headers = [\"\", \"Name\", \"Email\", \"City\", \"Date\"];\n        const rowData = Array.from(tr.children).map(td => td.textContent.trim());\n\n        const csvContent = [ headers.join(','), rowData.join(',') ].join(\"\\\\n\");\n\n        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        let filename = user.firstname + ' ' + user.lastname + '.csv';\n        a.setAttribute('href', url);\n        a.setAttribute('download', filename);\n        a.style.display = 'none';\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        URL.revokeObjectURL(url);\n    });\n});"],"names":["showToast","message","isSuccess","arguments","length","undefined","toast","document","getElementById","textContent","style","backgroundColor","className","setTimeout","_exports","init","window","console","log","querySelectorAll","forEach","link","addEventListener","event","preventDefault","userid","this","getAttribute","fetch","M","cfg","wwwroot","method","headers","body","JSON","stringify","then","response","json","data","success","username","catch","error","user","parse","tr","closest","rowData","Array","from","children","map","td","trim","slice","jsPDF","jspdf","doc","setFontSize","text","autoTable","head","startY","filename","firstname","lastname","blob","output","formData","FormData","append","id","result","save","csvContent","join","Blob","type","url","URL","createObjectURL","a","createElement","setAttribute","display","appendChild","click","removeChild","revokeObjectURL"],"mappings":"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"}