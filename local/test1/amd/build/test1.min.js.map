{"version":3,"file":"test1.min.js","sources":["../src/test1.js"],"sourcesContent":["export const init = () => {\n    window.console.log('--------------- Test 1 js working ---------------');\n};\n/**\n * Description of showToast.\n * @param {string} message - The message.\n * @param {boolean} isSuccess - Indicates success or failure.\n */\nfunction showToast(message, isSuccess = true) {\n    // const toast = document.getElementById('toast');\n    // toast.textContent = message;\n    // toast.style.backgroundColor = isSuccess ? '#b3ffae' : '#ffe0e0';\n    // toast.className = 'show d-flex justify-content-center p-2';\n    // setTimeout(() => {\n    //     toast.className = 'toast ';\n    // }, 2000);\n    let title = isSuccess ? 'Mail Send' : 'Mail Not Send';\n    const icon = isSuccess ? 'success' : 'error';\n    let toast = false;\n    if (message.includes('CSV')) {\n        title = null;\n        toast = true;\n    }\n    Swal.fire({\n        title: title,\n        text: message,\n        icon: icon,\n        showConfirmButton: false,\n        confirmButtonText: 'OK',\n        showCancelButton: false,\n        cancelButtonText: 'Cancle',\n        confirmButtonColor: '#3085d6',\n        cancelButtonColor:'#d33',\n        iconColor:'#d33',\n        timer: 3000,\n        toast: toast,\n        timerProgressBar:true,\n        //allowOutsideClick:true,\n        allowEscapeKey:false,\n        //allowEnterKey:true,\n    });\n}\n\ndocument.querySelectorAll('.maillink').forEach(link => {\n    link.addEventListener('click', function(event) {\n        event.preventDefault();\n        const userid = this.getAttribute('data-uid');\n        fetch(M.cfg.wwwroot +'/local/test1/testmail.php', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-Requested-With': 'XMLHttpRequest',\n            },\n            body: JSON.stringify({ uid: userid })\n        }).then(response => response.json())\n            .then(data => {\n                if (data.success) {\n                    showToast('Email sent successfully to ' + data.username, true);\n                    window.console.log('Email sent successfully to ' + data.username);\n                } else {\n                    showToast('Failed to send mail', false);\n                }\n            }).catch(error => {\n            window.console.log(error);\n            showToast('An error occurred while sending the email.', false);\n        });\n    });\n});\n\ndocument.querySelectorAll('.downloadpdf').forEach(link => {\n    link.addEventListener('click', function(event) {\n        event.preventDefault();\n        const user = JSON.parse(this.getAttribute('data-user'));\n        const tr = this.closest('tr');\n        if (!tr) {\n            window.console.error(\"Row not found\");\n            return;\n        }\n\n        const headers = [\"Name\", \"Email\", \"City\", \"Date\"];\n        const rowData = Array.from(tr.children).map(td => td.textContent.trim()).slice(1);\n\n        const { jsPDF } = window.jspdf;\n        const doc = new jsPDF();\n\n        const title = \"User Information.\";\n        doc.setFontSize(16);\n        doc.text(title, 80, 15);\n\n        doc.autoTable({ head: [headers], body: [rowData], startY: 20 });\n\n        const filename = user.firstname + ' ' + user.lastname + '.pdf';\n\n        const blob = doc.output('blob'); // sync\n        const formData = new FormData();\n        formData.append('pdf', blob, filename);\n        formData.append('userid', user.id);\n\n        fetch(M.cfg.wwwroot +'/local/test1/testmail.php', {\n            method: 'POST',\n            body: formData\n        }).then(response => response.json())\n            .then(result => {\n                window.console.log('PDF sent to user : ', result.username);\n                showToast('PDF sent to user : ' + result.username, true);\n            }).catch(error => {\n                window.console.error('Error sending PDF to server:', error);\n                showToast('Error sending PDF in send mail', false);\n        });\n\n        doc.save(filename);\n    });\n});\n\ndocument.querySelectorAll('.downloadcsv').forEach(link => {\n    link.addEventListener('click', function(event) {\n        event.preventDefault();\n        const user = JSON.parse(this.getAttribute('data-user'));\n        const tr = this.closest('tr');\n        if (!tr) {\n            window.error(\"Row not found\");\n            return;\n        }\n\n        const headers = [\"Name\", \"Email\", \"City\", \"Date\"];\n        const rowData = Array.from(tr.children).map(td => td.textContent.trim()).slice(1);\n\n        const csvContent = [ headers.join(','), rowData.join(',') ].join(\"\\n\");\n\n        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        let filename = user.firstname + ' ' + user.lastname + '.csv';\n        a.setAttribute('href', url);\n        a.setAttribute('download', filename);\n        a.style.display = 'none';\n        document.body.appendChild(a);\n        a.click();\n        showToast('CSV Exported successfully...',true);\n        document.body.removeChild(a);\n        URL.revokeObjectURL(url);\n    });\n});"],"names":["showToast","message","isSuccess","arguments","length","undefined","title","icon","toast","includes","Swal","fire","text","showConfirmButton","confirmButtonText","showCancelButton","cancelButtonText","confirmButtonColor","cancelButtonColor","iconColor","timer","timerProgressBar","allowEscapeKey","_exports","init","window","console","log","document","querySelectorAll","forEach","link","addEventListener","event","preventDefault","userid","this","getAttribute","fetch","M","cfg","wwwroot","method","headers","body","JSON","stringify","uid","then","response","json","data","success","username","catch","error","user","parse","tr","closest","rowData","Array","from","children","map","td","textContent","trim","slice","jsPDF","jspdf","doc","setFontSize","autoTable","head","startY","filename","firstname","lastname","blob","output","formData","FormData","append","id","result","save","csvContent","join","Blob","type","url","URL","createObjectURL","a","createElement","setAttribute","style","display","appendChild","click","removeChild","revokeObjectURL"],"mappings":"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"}