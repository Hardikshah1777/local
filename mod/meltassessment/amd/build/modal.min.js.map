{"version":3,"file":"modal.min.js","sources":["../src/modal.js"],"sourcesContent":["define(['jquery', 'core/notification', 'core/custom_interaction_events', 'core/modal', 'core/modal_registry', 'core/modal_events'],\n    function($, Notification, CustomEvents, Modal, ModalRegistry, ModalEvents) {\n        var registered = false;\n        var SELECTORS = {\n            CONFIRM_BUTTON: '[data-action=\"confirmsave\"]',\n            CANCEL_BUTTON: '[data-action=\"cancelsave\"]',\n        };\n\n        /**\n         * Constructor for the Modal.\n         *\n         * @param {object} root The root jQuery element for the modal\n         */\n        var ModalLogin = function(root) {\n            Modal.call(this, root);\n\n            if (!this.getFooter().find(SELECTORS.CONFIRM_BUTTON).length) {\n                Notification.exception({message: 'No login button found'});\n            }\n\n            if (!this.getFooter().find(SELECTORS.CANCEL_BUTTON).length) {\n                Notification.exception({message: 'No cancel button found'});\n            }\n        };\n        ModalLogin.type = 'mod_meltassessment-confirm';\n        ModalLogin.prototype = Object.create(Modal.prototype);\n        ModalLogin.prototype.constructor = ModalLogin;\n\n        /**\n         * Set up all of the event handling for the modal.\n         *\n         * @method registerEventListeners\n         */\n        ModalLogin.prototype.registerEventListeners = function() {\n            // Apply parent event listeners.\n            Modal.prototype.registerEventListeners.call(this);\n\n            this.getModal().on(CustomEvents.events.activate, SELECTORS.CONFIRM_BUTTON, function(e, data) {\n                // Add your logic for when the login button is clicked. This could include the form validation,\n                // loading animations, error handling etc.\n                var saveEvent = $.Event(ModalEvents.save);\n                this.getRoot().trigger(saveEvent, this);\n                if (!saveEvent.isDefaultPrevented()) {\n                    var savebtn = document.getElementById('save');\n                    savebtn.click();\n                    this.hide();\n                    data.originalEvent.preventDefault();\n                }\n            }.bind(this));\n\n            this.getModal().on(CustomEvents.events.activate, SELECTORS.CANCEL_BUTTON, function(e, data) {\n                var cancelEvent = $.Event(ModalEvents.cancel);\n                this.getRoot().trigger(cancelEvent, this);\n\n                if (!cancelEvent.isDefaultPrevented()) {\n                    this.hide();\n                    data.originalEvent.preventDefault();\n                }\n            }.bind(this));\n        };\n\n        if (!registered) {\n            ModalRegistry.register(ModalLogin.type, ModalLogin, 'mod_meltassessment/modal');\n            registered = true;\n        }\n        return ModalLogin;\n    });"],"names":["define","$","Notification","CustomEvents","Modal","ModalRegistry","ModalEvents","registered","SELECTORS","ModalLogin","root","call","this","getFooter","find","length","exception","message","type","prototype","Object","create","constructor","registerEventListeners","getModal","on","events","activate","e","data","saveEvent","Event","save","getRoot","trigger","isDefaultPrevented","document","getElementById","click","hide","originalEvent","preventDefault","bind","cancelEvent","cancel","register"],"mappings":"AAAAA,kCAAO,CAAC,SAAU,oBAAqB,iCAAkC,aAAc,sBAAuB,sBAC1G,SAASC,EAAGC,aAAcC,aAAcC,MAAOC,cAAeC,iBACtDC,YAAa,EACbC,yBACgB,8BADhBA,wBAEe,6BAQfC,WAAa,SAASC,MACtBN,MAAMO,KAAKC,KAAMF,MAEZE,KAAKC,YAAYC,KAAKN,0BAA0BO,QACjDb,aAAac,UAAU,CAACC,QAAS,0BAGhCL,KAAKC,YAAYC,KAAKN,yBAAyBO,QAChDb,aAAac,UAAU,CAACC,QAAS,mCAGzCR,WAAWS,KAAO,8BAClBT,WAAWU,UAAYC,OAAOC,OAAOjB,MAAMe,YACtBG,YAAcb,WAOnCA,WAAWU,UAAUI,uBAAyB,WAE1CnB,MAAMe,UAAUI,uBAAuBZ,KAAKC,WAEvCY,WAAWC,GAAGtB,aAAauB,OAAOC,SAAUnB,yBAA0B,SAASoB,EAAGC,UAG/EC,UAAY7B,EAAE8B,MAAMzB,YAAY0B,YAC/BC,UAAUC,QAAQJ,UAAWlB,MAC7BkB,UAAUK,wBACGC,SAASC,eAAe,QAC9BC,aACHC,OACLV,KAAKW,cAAcC,mBAEzBC,KAAK9B,YAEFY,WAAWC,GAAGtB,aAAauB,OAAOC,SAAUnB,wBAAyB,SAASoB,EAAGC,UAC9Ec,YAAc1C,EAAE8B,MAAMzB,YAAYsC,aACjCX,UAAUC,QAAQS,YAAa/B,MAE/B+B,YAAYR,4BACRI,OACLV,KAAKW,cAAcC,mBAEzBC,KAAK9B,QAGNL,aACDF,cAAcwC,SAASpC,WAAWS,KAAMT,WAAY,4BACpDF,YAAa,GAEVE"}