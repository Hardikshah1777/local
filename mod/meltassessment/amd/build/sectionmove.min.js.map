{"version":3,"file":"sectionmove.min.js","sources":["../src/sectionmove.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\ndefine(['jquery', 'core/sortable_list', 'core/ajax', 'core/notification'], function($, SortableList, Ajax, Notification) {\n    return {\n        init: function() {\n            // Initialise sortable for the given list.\n            var sort = new SortableList('.skillsectionwrapper', {targetListSelector: '.skillsectionwrapper'});\n            sort.getElementName = function(element) {\n                return $.Deferred().resolve(element.attr('data-name'));\n            };\n            $('.skillsectionwrapper .sectionwrapper').on(SortableList.EVENTS.DRAGSTART, function(_, info) {\n                setTimeout(function() {\n                    $('.sortable-list-is-dragged').width(info.element.width());\n                }, 501);\n            }).on(SortableList.EVENTS.DROP, function(_, info) {\n                var listsection = info.targetList[0].children;\n                var data = [];\n                    for (var i = 0; i < listsection.length - 1; i++) {\n                        data.push({sectionid: listsection[i].getAttribute('data-id'), position: i});\n                    }\n                if (info.positionChanged) {\n                    var request = {\n                        methodname: 'mod_meltassessment_invoke_move_action',\n                        args: {\n                            action: 'move_updown_field',\n                            data: data,\n                        }\n                    };\n                    Ajax.call([request])[0].fail(Notification.exception);\n                }\n            });\n        }\n    };\n});\n"],"names":["define","$","SortableList","Ajax","Notification","init","targetListSelector","getElementName","element","Deferred","resolve","attr","on","EVENTS","DRAGSTART","_","info","setTimeout","width","DROP","listsection","targetList","children","data","i","length","push","sectionid","getAttribute","position","positionChanged","request","methodname","args","action","call","fail","exception"],"mappings":"AAcAA,wCAAO,CAAC,SAAU,qBAAsB,YAAa,sBAAsB,SAASC,EAAGC,aAAcC,KAAMC,oBAChG,CACHC,KAAM,WAES,IAAIH,aAAa,uBAAwB,CAACI,mBAAoB,yBACpEC,eAAiB,SAASC,gBACpBP,EAAEQ,WAAWC,QAAQF,QAAQG,KAAK,eAE7CV,EAAE,wCAAwCW,GAAGV,aAAaW,OAAOC,WAAW,SAASC,EAAGC,MACpFC,YAAW,WACPhB,EAAE,6BAA6BiB,MAAMF,KAAKR,QAAQU,WACnD,QACJN,GAAGV,aAAaW,OAAOM,MAAM,SAASJ,EAAGC,cACpCI,YAAcJ,KAAKK,WAAW,GAAGC,SACjCC,KAAO,GACEC,EAAI,EAAGA,EAAIJ,YAAYK,OAAS,EAAGD,IACxCD,KAAKG,KAAK,CAACC,UAAWP,YAAYI,GAAGI,aAAa,WAAYC,SAAUL,OAE5ER,KAAKc,gBAAiB,KAClBC,QAAU,CACVC,WAAY,wCACZC,KAAM,CACFC,OAAQ,oBACRX,KAAMA,OAGdpB,KAAKgC,KAAK,CAACJ,UAAU,GAAGK,KAAKhC,aAAaiC"}