{"version":3,"sources":["../src/modal.js"],"names":["define","$","Notification","CustomEvents","Modal","ModalRegistry","ModalEvents","registered","SELECTORS","CONFIRM_BUTTON","CANCEL_BUTTON","ModalLogin","root","call","getFooter","find","length","exception","message","type","prototype","Object","create","constructor","registerEventListeners","getModal","on","events","activate","e","data","saveEvent","Event","save","getRoot","trigger","isDefaultPrevented","savebtn","document","getElementById","click","hide","originalEvent","preventDefault","bind","cancelEvent","cancel","register"],"mappings":"AAAAA,OAAM,4BAAC,CAAC,QAAD,CAAW,mBAAX,CAAgC,gCAAhC,CAAkE,YAAlE,CAAgF,qBAAhF,CAAuG,mBAAvG,CAAD,CACF,SAASC,CAAT,CAAYC,CAAZ,CAA0BC,CAA1B,CAAwCC,CAAxC,CAA+CC,CAA/C,CAA8DC,CAA9D,CAA2E,IACnEC,CAAAA,CAAU,GADyD,CAEnEC,CAAS,CAAG,CACZC,cAAc,CAAE,+BADJ,CAEZC,aAAa,CAAE,8BAFH,CAFuD,CAYnEC,CAAU,CAAG,SAASC,CAAT,CAAe,CAC5BR,CAAK,CAACS,IAAN,CAAW,IAAX,CAAiBD,CAAjB,EAEA,GAAI,CAAC,KAAKE,SAAL,GAAiBC,IAAjB,CAAsBP,CAAS,CAACC,cAAhC,EAAgDO,MAArD,CAA6D,CACzDd,CAAY,CAACe,SAAb,CAAuB,CAACC,OAAO,CAAE,uBAAV,CAAvB,CACH,CAED,GAAI,CAAC,KAAKJ,SAAL,GAAiBC,IAAjB,CAAsBP,CAAS,CAACE,aAAhC,EAA+CM,MAApD,CAA4D,CACxDd,CAAY,CAACe,SAAb,CAAuB,CAACC,OAAO,CAAE,wBAAV,CAAvB,CACH,CACJ,CAtBsE,CAuBvEP,CAAU,CAACQ,IAAX,CAAkB,4BAAlB,CACAR,CAAU,CAACS,SAAX,CAAuBC,MAAM,CAACC,MAAP,CAAclB,CAAK,CAACgB,SAApB,CAAvB,CACAT,CAAU,CAACS,SAAX,CAAqBG,WAArB,CAAmCZ,CAAnC,CAOAA,CAAU,CAACS,SAAX,CAAqBI,sBAArB,CAA8C,UAAW,CAErDpB,CAAK,CAACgB,SAAN,CAAgBI,sBAAhB,CAAuCX,IAAvC,CAA4C,IAA5C,EAEA,KAAKY,QAAL,GAAgBC,EAAhB,CAAmBvB,CAAY,CAACwB,MAAb,CAAoBC,QAAvC,CAAiDpB,CAAS,CAACC,cAA3D,CAA2E,SAASoB,CAAT,CAAYC,CAAZ,CAAkB,CAGzF,GAAIC,CAAAA,CAAS,CAAG9B,CAAC,CAAC+B,KAAF,CAAQ1B,CAAW,CAAC2B,IAApB,CAAhB,CACA,KAAKC,OAAL,GAAeC,OAAf,CAAuBJ,CAAvB,CAAkC,IAAlC,EACA,GAAI,CAACA,CAAS,CAACK,kBAAV,EAAL,CAAqC,CACjC,GAAMC,CAAAA,CAAO,CAAGC,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAhB,CACAF,CAAO,CAACG,KAAR,GACA,KAAKC,IAAL,GACAX,CAAI,CAACY,aAAL,CAAmBC,cAAnB,EACH,CACJ,CAX0E,CAWzEC,IAXyE,CAWpE,IAXoE,CAA3E,EAaA,KAAKnB,QAAL,GAAgBC,EAAhB,CAAmBvB,CAAY,CAACwB,MAAb,CAAoBC,QAAvC,CAAiDpB,CAAS,CAACE,aAA3D,CAA0E,SAASmB,CAAT,CAAYC,CAAZ,CAAkB,CACxF,GAAIe,CAAAA,CAAW,CAAG5C,CAAC,CAAC+B,KAAF,CAAQ1B,CAAW,CAACwC,MAApB,CAAlB,CACA,KAAKZ,OAAL,GAAeC,OAAf,CAAuBU,CAAvB,CAAoC,IAApC,EAEA,GAAI,CAACA,CAAW,CAACT,kBAAZ,EAAL,CAAuC,CACnC,KAAKK,IAAL,GACAX,CAAI,CAACY,aAAL,CAAmBC,cAAnB,EACH,CACJ,CARyE,CAQxEC,IARwE,CAQnE,IARmE,CAA1E,CASH,CA1BD,CA4BA,GAAI,CAACrC,CAAL,CAAiB,CACbF,CAAa,CAAC0C,QAAd,CAAuBpC,CAAU,CAACQ,IAAlC,CAAwCR,CAAxC,CAAoD,0BAApD,EACAJ,CAAU,GACb,CACD,MAAOI,CAAAA,CACV,CAlEC,CAAN","sourcesContent":["define(['jquery', 'core/notification', 'core/custom_interaction_events', 'core/modal', 'core/modal_registry', 'core/modal_events'],\n    function($, Notification, CustomEvents, Modal, ModalRegistry, ModalEvents) {\n        var registered = false;\n        var SELECTORS = {\n            CONFIRM_BUTTON: '[data-action=\"confirmsave\"]',\n            CANCEL_BUTTON: '[data-action=\"cancelsave\"]',\n        };\n\n        /**\n         * Constructor for the Modal.\n         *\n         * @param {object} root The root jQuery element for the modal\n         */\n        var ModalLogin = function(root) {\n            Modal.call(this, root);\n\n            if (!this.getFooter().find(SELECTORS.CONFIRM_BUTTON).length) {\n                Notification.exception({message: 'No login button found'});\n            }\n\n            if (!this.getFooter().find(SELECTORS.CANCEL_BUTTON).length) {\n                Notification.exception({message: 'No cancel button found'});\n            }\n        };\n        ModalLogin.type = 'mod_progressreport-confirm';\n        ModalLogin.prototype = Object.create(Modal.prototype);\n        ModalLogin.prototype.constructor = ModalLogin;\n\n        /**\n         * Set up all of the event handling for the modal.\n         *\n         * @method registerEventListeners\n         */\n        ModalLogin.prototype.registerEventListeners = function() {\n            // Apply parent event listeners.\n            Modal.prototype.registerEventListeners.call(this);\n\n            this.getModal().on(CustomEvents.events.activate, SELECTORS.CONFIRM_BUTTON, function(e, data) {\n                // Add your logic for when the login button is clicked. This could include the form validation,\n                // loading animations, error handling etc.\n                var saveEvent = $.Event(ModalEvents.save);\n                this.getRoot().trigger(saveEvent, this);\n                if (!saveEvent.isDefaultPrevented()) {\n                    const savebtn = document.getElementById('save');\n                    savebtn.click();\n                    this.hide();\n                    data.originalEvent.preventDefault();\n                }\n            }.bind(this));\n\n            this.getModal().on(CustomEvents.events.activate, SELECTORS.CANCEL_BUTTON, function(e, data) {\n                var cancelEvent = $.Event(ModalEvents.cancel);\n                this.getRoot().trigger(cancelEvent, this);\n\n                if (!cancelEvent.isDefaultPrevented()) {\n                    this.hide();\n                    data.originalEvent.preventDefault();\n                }\n            }.bind(this));\n        };\n\n        if (!registered) {\n            ModalRegistry.register(ModalLogin.type, ModalLogin, 'mod_progressreport/modal');\n            registered = true;\n        }\n        return ModalLogin;\n    });"],"file":"modal.min.js"}